{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { BASE_URL, patchConfigure } from \"../../Api/api\";\nimport { toast } from \"react-toastify\";\nexport const fetchCoustomers = createAsyncThunk('customers/fetchCustomers', async _ref => {\n  let {\n    signal\n  } = _ref;\n  const res = await fetch(`${BASE_URL}/customers?_sort=id&_order=desc`, {\n    signal\n  });\n  const data = await res.json();\n  return data;\n});\nexport const updateCustomer = createAsyncThunk('customers/updateCustomer', async _ref2 => {\n  let {\n    id,\n    updateData\n  } = _ref2;\n  const res = await fetch(`${BASE_URL}/customers/${id}`, patchConfigure(updateData));\n  const data = await res.json();\n  return {\n    id,\n    data\n  };\n});\nconst customersSlice = createSlice({\n  name: 'customers',\n  initialState: {\n    error: false,\n    customers: []\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchCoustomers.fulfilled, (state, action) => {\n      state.error = false;\n      state.customers = action.payload;\n    });\n    builder.addCase(fetchCoustomers.rejected, (state, action) => {\n      const error = action.error;\n\n      if (error.name !== 'AbortError') {\n        state.error = error.message;\n        state.customers = [];\n      }\n    });\n    builder.addCase(updateCustomer.pending, () => {\n      toast.dismiss();\n      toast.info('Updating...');\n    });\n    builder.addCase(updateCustomer.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success('Update Complete');\n      const {\n        id,\n        data\n      } = action.payload;\n      const targetIndex = state.customers.findIndex(customer => customer.id === id);\n      state.customers[targetIndex] = { ...state.customers[targetIndex],\n        ...data\n      };\n    });\n    builder.addCase(updateCustomer.rejected, (state, action) => {\n      const error = action.error;\n      toast.dismiss();\n      toast.error(error.message);\n    });\n  }\n});\nexport default customersSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","BASE_URL","patchConfigure","toast","fetchCoustomers","signal","res","fetch","data","json","updateCustomer","id","updateData","customersSlice","name","initialState","error","customers","extraReducers","builder","addCase","fulfilled","state","action","payload","rejected","message","pending","dismiss","info","success","targetIndex","findIndex","customer","reducer"],"sources":["C:/Users/DELL/OneDrive/Desktop/New folder/New folder/src/App/features/customersSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { BASE_URL, patchConfigure } from \"../../Api/api\";\nimport { toast } from \"react-toastify\";\n\nexport const fetchCoustomers = createAsyncThunk(\n    'customers/fetchCustomers',\n    async ({signal}) => {\n        const res = await fetch(`${BASE_URL}/customers?_sort=id&_order=desc`, {signal})\n        const data = await res.json()\n        return data\n    }\n)\n\nexport const updateCustomer = createAsyncThunk(\n    'customers/updateCustomer',\n    async ({id, updateData}) => {\n        const res = await fetch(`${BASE_URL}/customers/${id}`, patchConfigure(updateData))\n        const data = await res.json()\n        return { id, data };\n    }\n)\n\n\nconst customersSlice = createSlice({\n    name: 'customers',\n    initialState: {\n        error: false,\n        customers: []\n    },\n    extraReducers: (builder) => {\n        builder.addCase(fetchCoustomers.fulfilled, (state, action) => {\n            state.error = false;\n            state.customers = action.payload;\n        });\n        builder.addCase(fetchCoustomers.rejected, (state, action) => {\n            const error = action.error;\n            if (error.name !== 'AbortError'){\n                state.error = error.message\n                state.customers = [];\n            }\n        });\n\n        builder.addCase(updateCustomer.pending, () => {\n            toast.dismiss()\n            toast.info('Updating...')\n        })\n        builder.addCase(updateCustomer.fulfilled, (state, action) => {\n            toast.dismiss()\n            toast.success('Update Complete')\n\n            const { id, data } = action.payload;\n            const targetIndex = state.customers.findIndex(customer => customer.id === id);\n            state.customers[targetIndex] = { ...state.customers[targetIndex], ...data};\n\n        })\n        builder.addCase(updateCustomer.rejected, (state, action) => {\n            const error = action.error;\n            toast.dismiss()\n            toast.error(error.message)\n        })\n    }\n})\n\nexport default customersSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}