{"ast":null,"code":"import { smartEscape } from \"./smartEscape.js\";\nexport function finalize_source(source, format, url_suffix) {\n  let source_to_sign;\n  source = source.replace(/([^:])\\/\\//g, '$1/');\n\n  if (source.match(/^https?:\\//i)) {\n    source = smartEscape(source);\n    source_to_sign = source;\n  } else {\n    source = encodeURIComponent(decodeURIComponent(source)).replace(/%3A/g, \":\").replace(/%2F/g, \"/\");\n    source_to_sign = source;\n\n    if (url_suffix) {\n      if (url_suffix.match(/[\\.\\/]/)) {\n        throw new Error('url_suffix should not include . or /');\n      }\n\n      source = source + '/' + url_suffix;\n    }\n\n    if (format != null) {\n      source = source + '.' + format;\n      source_to_sign = source_to_sign + '.' + format;\n    }\n  }\n\n  return [source, source_to_sign];\n}","map":{"version":3,"names":["smartEscape","finalize_source","source","format","url_suffix","source_to_sign","replace","match","encodeURIComponent","decodeURIComponent","Error"],"sources":["C:/Users/DELL/OneDrive/Desktop/New folder (2)/New folder/node_modules/@cloudinary/transformation-builder-sdk/backwards/utils/finalize_source.js"],"sourcesContent":["import { smartEscape } from \"./smartEscape.js\";\nexport function finalize_source(source, format, url_suffix) {\n    let source_to_sign;\n    source = source.replace(/([^:])\\/\\//g, '$1/');\n    if (source.match(/^https?:\\//i)) {\n        source = smartEscape(source);\n        source_to_sign = source;\n    }\n    else {\n        source = encodeURIComponent(decodeURIComponent(source)).replace(/%3A/g, \":\").replace(/%2F/g, \"/\");\n        source_to_sign = source;\n        if (url_suffix) {\n            if (url_suffix.match(/[\\.\\/]/)) {\n                throw new Error('url_suffix should not include . or /');\n            }\n            source = source + '/' + url_suffix;\n        }\n        if (format != null) {\n            source = source + '.' + format;\n            source_to_sign = source_to_sign + '.' + format;\n        }\n    }\n    return [source, source_to_sign];\n}\n"],"mappings":"AAAA,SAASA,WAAT,QAA4B,kBAA5B;AACA,OAAO,SAASC,eAAT,CAAyBC,MAAzB,EAAiCC,MAAjC,EAAyCC,UAAzC,EAAqD;EACxD,IAAIC,cAAJ;EACAH,MAAM,GAAGA,MAAM,CAACI,OAAP,CAAe,aAAf,EAA8B,KAA9B,CAAT;;EACA,IAAIJ,MAAM,CAACK,KAAP,CAAa,aAAb,CAAJ,EAAiC;IAC7BL,MAAM,GAAGF,WAAW,CAACE,MAAD,CAApB;IACAG,cAAc,GAAGH,MAAjB;EACH,CAHD,MAIK;IACDA,MAAM,GAAGM,kBAAkB,CAACC,kBAAkB,CAACP,MAAD,CAAnB,CAAlB,CAA+CI,OAA/C,CAAuD,MAAvD,EAA+D,GAA/D,EAAoEA,OAApE,CAA4E,MAA5E,EAAoF,GAApF,CAAT;IACAD,cAAc,GAAGH,MAAjB;;IACA,IAAIE,UAAJ,EAAgB;MACZ,IAAIA,UAAU,CAACG,KAAX,CAAiB,QAAjB,CAAJ,EAAgC;QAC5B,MAAM,IAAIG,KAAJ,CAAU,sCAAV,CAAN;MACH;;MACDR,MAAM,GAAGA,MAAM,GAAG,GAAT,GAAeE,UAAxB;IACH;;IACD,IAAID,MAAM,IAAI,IAAd,EAAoB;MAChBD,MAAM,GAAGA,MAAM,GAAG,GAAT,GAAeC,MAAxB;MACAE,cAAc,GAAGA,cAAc,GAAG,GAAjB,GAAuBF,MAAxC;IACH;EACJ;;EACD,OAAO,CAACD,MAAD,EAASG,cAAT,CAAP;AACH"},"metadata":{},"sourceType":"module"}