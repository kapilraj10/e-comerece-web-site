{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { BASE_URL, deleteConfig, patchConfigure, postConfigure } from \"../../Api/api\";\nimport { toast } from 'react-toastify';\nexport const fetchUsers = createAsyncThunk('users/fetchUsers', async _ref => {\n  let {\n    signal\n  } = _ref;\n  const res = await fetch(`${BASE_URL}/users?_sort=id&_order=desc`, {\n    signal\n  });\n  const data = await res.json();\n  return data;\n});\nexport const addUser = createAsyncThunk('users/addUser', async userData => {\n  const res = await fetch(`${BASE_URL}/users`, postConfigure(userData));\n  const data = await res.json();\n  const status = res.ok;\n  return {\n    data,\n    status\n  };\n});\nexport const updateUser = createAsyncThunk('users/updateUser', async _ref2 => {\n  let {\n    id,\n    updateData\n  } = _ref2;\n  const res = await fetch(`${BASE_URL}/users/${id}`, patchConfigure(updateData));\n  const data = await res.json();\n  const status = res.ok;\n  return {\n    id,\n    data,\n    status\n  };\n});\nexport const deleteUser = createAsyncThunk('users/deleteUser', async id => {\n  const res = await fetch(`${BASE_URL}/users/${id}`, deleteConfig());\n\n  if (!res.ok) {\n    throw new Error(res.statusText);\n  }\n\n  return id;\n});\nconst usersSlice = createSlice({\n  name: 'users',\n  initialState: {\n    users: [],\n    error: false\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchUsers.fulfilled, (state, action) => {\n      state.error = false;\n      state.users = action.payload;\n    });\n    builder.addCase(fetchUsers.rejected, (state, action) => {\n      const error = action.error;\n\n      if (error.name !== \"AbortError\") {\n        state.error = error.message;\n        state.users = [];\n      }\n    });\n    builder.addCase(addUser.pending, () => {\n      toast.dismiss();\n      toast.info('Adding User');\n    });\n    builder.addCase(addUser.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success('User Added');\n      const {\n        data\n      } = action.payload;\n      state.users.unshift(data);\n    });\n    builder.addCase(addUser.rejected, (state, action) => {\n      const error = action.error;\n      toast.dismiss();\n      toast.error(error.message);\n    });\n    builder.addCase(updateUser.pending, () => {\n      toast.dismiss();\n      toast.info('updating');\n    });\n    builder.addCase(updateUser.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success('update complete');\n      const {\n        id,\n        data\n      } = action.payload;\n      const targetIndex = state.users.findIndex(user => user.id === Number(id));\n      state.users[targetIndex] = { ...state.users[targetIndex],\n        ...data\n      };\n    });\n    builder.addCase(updateUser.rejected, (state, action) => {\n      const error = action.error;\n      toast.dismiss();\n      toast.error(error.message);\n    });\n    builder.addCase(deleteUser.pending, () => {\n      toast.dismiss();\n      toast.info('deleteing');\n    });\n    builder.addCase(deleteUser.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success('delete success');\n      const id = action.payload;\n      state.users = state.users.filter(user => user.id !== id);\n    });\n    builder.addCase(deleteUser.rejected, (state, action) => {\n      const error = action.error;\n      toast.dismiss();\n      toast.error(error.message);\n    });\n  }\n});\nexport default usersSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","BASE_URL","deleteConfig","patchConfigure","postConfigure","toast","fetchUsers","signal","res","fetch","data","json","addUser","userData","status","ok","updateUser","id","updateData","deleteUser","Error","statusText","usersSlice","name","initialState","users","error","extraReducers","builder","addCase","fulfilled","state","action","payload","rejected","message","pending","dismiss","info","success","unshift","targetIndex","findIndex","user","Number","filter","reducer"],"sources":["C:/Users/DELL/OneDrive/Desktop/New folder (2)/New folder/src/App/features/usersSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { BASE_URL, deleteConfig, patchConfigure, postConfigure } from \"../../Api/api\";\nimport { toast } from 'react-toastify'\n\nexport const fetchUsers = createAsyncThunk(\n    'users/fetchUsers',\n    async ({signal}) => {\n        const res = await fetch(`${BASE_URL}/users?_sort=id&_order=desc`, {signal})\n        const data = await res.json()\n        return data\n    }\n)\n\nexport const addUser = createAsyncThunk(\n    'users/addUser',\n    async (userData) => {\n        const res = await fetch(`${BASE_URL}/users`, postConfigure(userData))\n        const data = await res.json()\n        const status = res.ok;\n\n        return { data, status}\n    }\n)\n\nexport const updateUser = createAsyncThunk(\n    'users/updateUser',\n    async ({id, updateData}) => {\n        const res = await fetch(`${BASE_URL}/users/${id}`, patchConfigure(updateData))\n        const data = await res.json()\n        const status = res.ok\n        return { id, data, status }\n    }\n)\n\nexport const deleteUser = createAsyncThunk(\n    'users/deleteUser',\n    async (id) => {\n        const res = await fetch(`${BASE_URL}/users/${id}`, deleteConfig());\n        if (!res.ok){\n            throw new Error(res.statusText)\n        }\n        return id\n    }\n)\n\nconst usersSlice = createSlice({\n    name: 'users',\n    initialState: {\n        users: [],\n        error: false\n    },\n    extraReducers: (builder) => {\n        builder.addCase(fetchUsers.fulfilled, (state, action) => {\n            state.error = false;\n            state.users = action.payload\n        });\n        builder.addCase(fetchUsers.rejected, (state, action) => {\n            const error = action.error\n            \n            if (error.name !== \"AbortError\") {\n                state.error = error.message;\n                state.users = []\n            }\n        });\n\n        builder.addCase(addUser.pending, () => {\n            toast.dismiss();\n            toast.info('Adding User')\n        });\n        builder.addCase(addUser.fulfilled, (state, action) => {\n            toast.dismiss();\n            toast.success('User Added')\n\n            const { data } = action.payload;\n            state.users.unshift(data)\n        });\n        builder.addCase(addUser.rejected, (state, action) => {\n            const error = action.error\n            toast.dismiss();\n            toast.error(error.message)\n        });\n\n        builder.addCase(updateUser.pending, () => {\n            toast.dismiss()\n            toast.info('updating')\n        });\n        builder.addCase(updateUser.fulfilled, (state, action) => {\n            toast.dismiss()\n            toast.success('update complete')\n\n            const { id, data } = action.payload\n            const targetIndex = state.users.findIndex(user => user.id === Number(id))\n\n            \n            state.users[targetIndex] = { ...state.users[targetIndex], ...data }\n            \n        });\n        builder.addCase(updateUser.rejected, (state, action) => {\n            const error = action.error\n            toast.dismiss()\n            toast.error(error.message)\n        });\n\n        builder.addCase(deleteUser.pending, () => {\n            toast.dismiss()\n            toast.info('deleteing')\n        });\n        builder.addCase(deleteUser.fulfilled, (state, action) => {\n            toast.dismiss()\n            toast.success('delete success')\n\n            const id = action.payload\n            state.users = state.users.filter(user => user.id !== id )\n        });\n        builder.addCase(deleteUser.rejected, (state, action) => {\n            const error = action.error\n            toast.dismiss()\n            toast.error(error.message)\n        });\n    }\n})\n\nexport default usersSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module"}