{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { BASE_URL, deleteConfig, patchConfigure, postConfigure } from \"../../Api/api\";\nimport { toast } from \"react-toastify\";\nexport const fetchBanner = createAsyncThunk('banner/fetchBanner', async _ref => {\n  let {\n    signal\n  } = _ref;\n  const res = await fetch(`${BASE_URL}/banner?_sort=id&_order=desc`, {\n    signal\n  });\n  const data = await res.json();\n\n  if (!res.ok) {\n    throw new Error(`Error ${res.status}: ${res.statusText}`);\n  }\n\n  return data;\n});\nexport const addBanner = createAsyncThunk('banner/addBanner', async _ref2 => {\n  let {\n    bannerData\n  } = _ref2;\n  const res = await fetch(`${BASE_URL}/banner`, postConfigure(bannerData));\n  const data = await res.json();\n  const status = res.ok;\n\n  if (!res.ok) {\n    throw new Error(`Error ${res.status}: ${res.statusText}`);\n  }\n\n  return {\n    data,\n    status\n  };\n});\nexport const updateBanner = createAsyncThunk('banner/updateBanner', async _ref3 => {\n  let {\n    id,\n    updateData\n  } = _ref3;\n  const res = await fetch(`${BASE_URL}/banner/${id}`, patchConfigure(updateData));\n  const data = await res.json();\n\n  if (!res.ok) {\n    throw new Error(`Error ${res.status}: ${res.statusText}`);\n  }\n\n  return {\n    data,\n    id\n  };\n});\nexport const deleteBanner = createAsyncThunk('banner/deleteBanner', async _ref4 => {\n  let {\n    id\n  } = _ref4;\n  const res = await fetch(`${BASE_URL}/banner/${id}`, deleteConfig());\n\n  if (!res.ok) {\n    throw new Error(`Error ${res.status}: ${res.statusText}`);\n  }\n\n  return {\n    id\n  };\n});\nconst bannerSlice = createSlice({\n  name: 'banner',\n  initialState: {\n    banner: [],\n    error: false\n  },\n  extraReducers: builder => {\n    // fetch banner\n    builder.addCase(fetchBanner.fulfilled, (state, action) => {\n      state.error = false;\n      state.banner = action.payload;\n    });\n    builder.addCase(fetchBanner.rejected, (state, action) => {\n      const error = action.error;\n\n      if (error.name !== \"AbortError\") {\n        state.error = error.message;\n      }\n    }); // add banner\n\n    builder.addCase(addBanner.pending, () => {\n      toast.dismiss();\n      toast.info('uploading');\n    });\n    builder.addCase(addBanner.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success('banner uploaded');\n      const {\n        data\n      } = action.payload;\n      state.banner.push(data);\n    });\n    builder.addCase(addBanner.rejected, (state, action) => {\n      const error = action.error.message;\n      toast.dismiss();\n      toast.error(error);\n    }); // update banner\n\n    builder.addCase(updateBanner.pending, () => {\n      toast.dismiss();\n      toast.info('updating');\n    });\n    builder.addCase(updateBanner.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success('update complete');\n      const {\n        data,\n        id\n      } = action.payload;\n      const targetIndex = state.banner.findIndex(ban => ban.id === id);\n      state.banner[targetIndex] = { ...state.banner[targetIndex],\n        ...data\n      };\n    });\n    builder.addCase(updateBanner.rejected, (state, action) => {\n      const error = action.error.message;\n      toast.dismiss();\n      toast.error(error);\n    }); // update banner\n\n    builder.addCase(deleteBanner.pending, () => {\n      toast.dismiss();\n      toast.info('deleting');\n    });\n    builder.addCase(deleteBanner.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success('deleted');\n      const {\n        id\n      } = action.payload;\n      state.banner = state.banner.filter(ban => ban.id !== id);\n    });\n    builder.addCase(deleteBanner.rejected, (state, action) => {\n      const error = action.error.message;\n      toast.dismiss();\n      toast.error(error);\n    });\n  }\n});\nexport default bannerSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","BASE_URL","deleteConfig","patchConfigure","postConfigure","toast","fetchBanner","signal","res","fetch","data","json","ok","Error","status","statusText","addBanner","bannerData","updateBanner","id","updateData","deleteBanner","bannerSlice","name","initialState","banner","error","extraReducers","builder","addCase","fulfilled","state","action","payload","rejected","message","pending","dismiss","info","success","push","targetIndex","findIndex","ban","filter","reducer"],"sources":["C:/Users/DELL/OneDrive/Desktop/New folder/New folder/src/App/features/bannerSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { BASE_URL, deleteConfig, patchConfigure, postConfigure } from \"../../Api/api\";\nimport { toast } from \"react-toastify\";\n\nexport const fetchBanner = createAsyncThunk(\n    'banner/fetchBanner',\n    async ({signal}) => {\n        const res = await fetch(`${BASE_URL}/banner?_sort=id&_order=desc`, {signal});\n        const data = await res.json();\n        if (!res.ok) {\n            throw new Error(`Error ${res.status}: ${res.statusText}`);\n        }\n        return data;\n    }\n);\n\nexport const addBanner = createAsyncThunk(\n    'banner/addBanner',\n    async ({bannerData}) => {\n        const res = await fetch(`${BASE_URL}/banner`, postConfigure(bannerData));\n        const data = await res.json();\n        const status = res.ok;\n        if (!res.ok) {\n            throw new Error(`Error ${res.status}: ${res.statusText}`);\n        }\n        return {data, status};\n    }\n)\n\nexport const updateBanner = createAsyncThunk(\n    'banner/updateBanner',\n    async ({id, updateData}) => {\n        const res = await fetch(`${BASE_URL}/banner/${id}`, patchConfigure(updateData));\n        const data = await res.json();\n        if (!res.ok) {\n            throw new Error(`Error ${res.status}: ${res.statusText}`);\n        }\n        return {data, id};\n    }\n)\n\nexport const deleteBanner = createAsyncThunk(\n    'banner/deleteBanner',\n    async ({id}) => {\n        const res = await fetch(`${BASE_URL}/banner/${id}`, deleteConfig());\n        if (!res.ok) {\n            throw new Error(`Error ${res.status}: ${res.statusText}`);\n        }\n        return {id};\n    }\n)\n\nconst bannerSlice = createSlice({\n    name: 'banner',\n    initialState: {\n        banner: [],\n        error: false\n    },\n    extraReducers: (builder) => {\n        // fetch banner\n        builder.addCase(fetchBanner.fulfilled, (state, action) => {\n            state.error = false;\n            state.banner = action.payload\n        });\n        builder.addCase(fetchBanner.rejected, (state, action) => {\n            const error = action.error;\n\n            if (error.name !== \"AbortError\") {\n                state.error = error.message;\n            }\n        });\n\n        // add banner\n        builder.addCase(addBanner.pending, () => {\n            toast.dismiss();\n            toast.info('uploading')\n        });\n        builder.addCase(addBanner.fulfilled, (state, action) => {\n            toast.dismiss();\n            toast.success('banner uploaded')\n            const { data } = action.payload\n            state.banner.push(data)\n        });\n        builder.addCase(addBanner.rejected, (state, action) => {\n            const error = action.error.message;\n            \n            toast.dismiss();\n            toast.error(error)\n        });\n\n        // update banner\n        builder.addCase(updateBanner.pending, () => {\n            toast.dismiss();\n            toast.info('updating')\n        });\n        builder.addCase(updateBanner.fulfilled, (state, action) => {\n            toast.dismiss();\n            toast.success('update complete')\n            const { data, id } = action.payload;\n            const targetIndex = state.banner.findIndex(ban => ban.id === id)\n\n            state.banner[targetIndex] = { ...state.banner[targetIndex], ...data}\n        });\n        builder.addCase(updateBanner.rejected, (state, action) => {\n            const error = action.error.message;\n            \n            toast.dismiss();\n            toast.error(error)\n        });\n\n        // update banner\n        builder.addCase(deleteBanner.pending, () => {\n            toast.dismiss();\n            toast.info('deleting')\n        });\n        builder.addCase(deleteBanner.fulfilled, (state, action) => {\n            toast.dismiss();\n            toast.success('deleted')\n            const { id } = action.payload;\n            state.banner = state.banner.filter(ban => ban.id !== id)\n        });\n        builder.addCase(deleteBanner.rejected, (state, action) => {\n            const error = action.error.message;\n            \n            toast.dismiss();\n            toast.error(error)\n        });\n    }\n})\n\nexport default bannerSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}