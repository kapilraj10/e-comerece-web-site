{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { toast } from \"react-toastify\";\nimport { BASE_URL, deleteConfig, patchConfigure } from \"../../Api/api\";\nexport const fetchCategory = createAsyncThunk(\"category\", async _ref => {\n  let {\n    signal\n  } = _ref;\n  const res = await fetch(`${BASE_URL}/category?_sort=id&_order=desc`, {\n    signal\n  });\n  const data = await res.json();\n\n  if (!res.ok) {\n    throw new Error(`Error ${res.status}: ${res.statusText}`);\n  }\n\n  return data;\n});\nexport const deleteCategory = createAsyncThunk(\"category/deleteCategory\", async id => {\n  const res = await fetch(`${BASE_URL}/category/${id}`, deleteConfig());\n\n  if (!res.ok) {\n    throw new Error(`Error ${res.status}: ${res.statusText}`);\n  }\n\n  return id;\n});\nexport const updateCategoryStatus = createAsyncThunk(\"category/updateCategoryStatus\", async _ref2 => {\n  let {\n    id,\n    updateData\n  } = _ref2;\n  const res = await fetch(`${BASE_URL}/category/${id}`, patchConfigure(updateData));\n  const data = await res.json();\n  return {\n    id,\n    data\n  };\n});\nconst categorySlice = createSlice({\n  name: \"category\",\n  initialState: {\n    category: [],\n    error: false\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchCategory.fulfilled, (state, action) => {\n      state.error = false;\n      state.category = action.payload;\n    });\n    builder.addCase(fetchCategory.rejected, (state, action) => {\n      const error = action.error;\n\n      if (error.name !== \"AbortError\") {\n        state.error = error.message;\n        state.category = [];\n      }\n    });\n    builder.addCase(updateCategoryStatus.pending, () => {\n      toast.dismiss();\n      toast.info(\"updating...\");\n    });\n    builder.addCase(updateCategoryStatus.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success(\"update success\");\n      const {\n        id,\n        data\n      } = action.payload;\n      const targetIndex = state.category.findIndex(category => category.id === id);\n      state.category[targetIndex] = { ...state.category[targetIndex],\n        ...data\n      };\n    });\n    builder.addCase(updateCategoryStatus.rejected, (state, action) => {\n      const error = action.error;\n      toast.dismiss();\n      toast.error(error.message);\n    });\n    builder.addCase(deleteCategory.pending, () => {\n      toast.dismiss();\n      toast.info(\"deleting...\");\n    });\n    builder.addCase(deleteCategory.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success(\"deleted\");\n      state.category = state.category.filter(category => category.id !== action.payload);\n    });\n    builder.addCase(deleteCategory.rejected, (state, action) => {\n      const error = action.error;\n      toast.dismiss();\n      toast.error(error.message);\n    });\n  },\n  reducers: {}\n});\nexport default categorySlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","toast","BASE_URL","deleteConfig","patchConfigure","fetchCategory","signal","res","fetch","data","json","ok","Error","status","statusText","deleteCategory","id","updateCategoryStatus","updateData","categorySlice","name","initialState","category","error","extraReducers","builder","addCase","fulfilled","state","action","payload","rejected","message","pending","dismiss","info","success","targetIndex","findIndex","filter","reducers","reducer"],"sources":["C:/Users/DELL/OneDrive/Desktop/New folder/New folder/src/App/features/categorySlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { toast } from \"react-toastify\";\nimport { BASE_URL, deleteConfig, patchConfigure } from \"../../Api/api\";\n\nexport const fetchCategory = createAsyncThunk(\n  \"category\",\n  async ({ signal }) => {\n    const res = await fetch(`${BASE_URL}/category?_sort=id&_order=desc`, {\n      signal,\n    });\n    const data = await res.json();\n    if (!res.ok) {\n      throw new Error(`Error ${res.status}: ${res.statusText}`);\n    }\n    return data;\n  }\n);\n\nexport const deleteCategory = createAsyncThunk(\n  \"category/deleteCategory\",\n  async (id) => {\n    const res = await fetch(`${BASE_URL}/category/${id}`, deleteConfig());\n    if (!res.ok) {\n      throw new Error(`Error ${res.status}: ${res.statusText}`);\n    }\n\n    return id;\n  }\n);\n\nexport const updateCategoryStatus = createAsyncThunk(\n  \"category/updateCategoryStatus\",\n  async ({ id, updateData }) => {\n    const res = await fetch(\n      `${BASE_URL}/category/${id}`,\n      patchConfigure(updateData)\n    );\n    const data = await res.json();\n    return { id, data };\n  }\n);\n\nconst categorySlice = createSlice({\n  name: \"category\",\n  initialState: {\n    category: [],\n    error: false,\n  },\n  extraReducers: (builder) => {\n    builder.addCase(fetchCategory.fulfilled, (state, action) => {\n      state.error = false;\n      state.category = action.payload;\n    });\n    builder.addCase(fetchCategory.rejected, (state, action) => {\n      const error = action.error;\n\n      if (error.name !== \"AbortError\") {\n        state.error = error.message;\n        state.category = [];\n      }\n    });\n    \n\n    builder.addCase(updateCategoryStatus.pending, () => {\n      toast.dismiss();\n      toast.info(\"updating...\");\n    });\n    builder.addCase(updateCategoryStatus.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success(\"update success\");\n\n      const { id, data } = action.payload;\n      const targetIndex = state.category.findIndex(\n        (category) => category.id === id\n      );\n\n      state.category[targetIndex] = { ...state.category[targetIndex], ...data };\n    });\n    builder.addCase(updateCategoryStatus.rejected, (state, action) => {\n      const error = action.error;\n      toast.dismiss();\n      toast.error(error.message);\n    });\n\n\n    builder.addCase(deleteCategory.pending, () => {\n      toast.dismiss();\n      toast.info(\"deleting...\");\n    });\n    builder.addCase(deleteCategory.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success(\"deleted\");\n\n      state.category = state.category.filter(\n        (category) => category.id !== action.payload\n      );\n    });\n    builder.addCase(deleteCategory.rejected, (state, action) => {\n      const error = action.error;\n      toast.dismiss();\n      toast.error(error.message);\n    });\n  },\n  reducers: {},\n});\n\nexport default categorySlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}