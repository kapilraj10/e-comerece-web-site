{"ast":null,"code":"import { toast } from 'react-toastify';\nimport { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { BASE_URL, patchConfigure, postConfigure } from \"../../Api/api\";\nexport const fetchCoupon = createAsyncThunk('coupon/fetchCoupon', async _ref => {\n  let {\n    signal\n  } = _ref;\n  const res = await fetch(`${BASE_URL}/coupon?_sort=id&_order=desc`, {\n    signal\n  });\n  const data = await res.json();\n  return data;\n});\nexport const addCoupon = createAsyncThunk('coupon/addCoupon', async _ref2 => {\n  let {\n    postData\n  } = _ref2;\n  const res = await fetch(`${BASE_URL}/coupon`, postConfigure(postData));\n  const data = await res.json();\n  return data;\n});\nexport const updateCouponStatus = createAsyncThunk('coupon/updateCouponStatus', async _ref3 => {\n  let {\n    id,\n    updateData\n  } = _ref3;\n  const res = await fetch(`${BASE_URL}/coupon/${id}`, patchConfigure(updateData));\n  const data = await res.json();\n  return {\n    id,\n    data\n  };\n});\nexport const updateCoupon = createAsyncThunk('coupon/updatecoupon', async _ref4 => {\n  let {\n    id,\n    updateData\n  } = _ref4;\n  const res = await fetch(`${BASE_URL}/coupon/${id}`, patchConfigure(updateData));\n  const data = await res.json();\n  const status = res.ok;\n  return {\n    id,\n    data,\n    status\n  };\n});\nconst couponSlice = createSlice({\n  name: 'coupon',\n  initialState: {\n    coupon: [],\n    error: false\n  },\n  extraReducers: builder => {\n    // fetch coupon\n    builder.addCase(fetchCoupon.fulfilled, (state, action) => {\n      state.error = false;\n      state.coupon = action.payload;\n    });\n    builder.addCase(fetchCoupon.rejected, (state, action) => {\n      const error = action.error;\n\n      if (error.name !== \"AbortError\") {\n        state.error = error.message;\n        state.coupon = [];\n      }\n    }); // Adding Coupon\n\n    builder.addCase(addCoupon.pending, () => {\n      toast.dismiss();\n      toast.info('Ading Coupon');\n    });\n    builder.addCase(addCoupon.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success('Coupon Added');\n      state.coupon.unshift(action.payload);\n    });\n    builder.addCase(addCoupon.rejected, (state, action) => {\n      const error = action.error.message;\n      toast.dismiss();\n      toast.error(error);\n    }); // Updating Coupon Status\n\n    builder.addCase(updateCouponStatus.pending, () => {\n      toast.dismiss();\n      toast.info('updating');\n    });\n    builder.addCase(updateCouponStatus.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success('updated');\n      const {\n        id,\n        data\n      } = action.payload;\n      const targetIndex = state.coupon.findIndex(coupon => coupon.id === id);\n      state.coupon[targetIndex] = { ...state.coupon[targetIndex],\n        ...data\n      };\n    });\n    builder.addCase(updateCouponStatus.rejected, (state, action) => {\n      const error = action.error.message;\n      toast.dismiss();\n      toast.error(error);\n    }); // Updating Coupon\n\n    builder.addCase(updateCoupon.pending, () => {\n      toast.dismiss();\n      toast.info('updating');\n    });\n    builder.addCase(updateCoupon.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success('updated');\n      const {\n        id,\n        data\n      } = action.payload;\n      const targetIndex = state.coupon.findIndex(coupon => coupon.id === id);\n      state.coupon[targetIndex] = { ...state.coupon[targetIndex],\n        ...data\n      };\n    });\n    builder.addCase(updateCoupon.rejected, (state, action) => {\n      const error = action.error.message;\n      toast.dismiss();\n      toast.error(error);\n    });\n  }\n});\nexport default couponSlice.reducer;","map":{"version":3,"names":["toast","createAsyncThunk","createSlice","BASE_URL","patchConfigure","postConfigure","fetchCoupon","signal","res","fetch","data","json","addCoupon","postData","updateCouponStatus","id","updateData","updateCoupon","status","ok","couponSlice","name","initialState","coupon","error","extraReducers","builder","addCase","fulfilled","state","action","payload","rejected","message","pending","dismiss","info","success","unshift","targetIndex","findIndex","reducer"],"sources":["C:/Users/DELL/OneDrive/Desktop/New folder (2)/New folder/src/App/features/couponSlice.js"],"sourcesContent":["import { toast } from 'react-toastify'\nimport { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { BASE_URL, patchConfigure, postConfigure } from \"../../Api/api\";\n\nexport const fetchCoupon = createAsyncThunk(\n    'coupon/fetchCoupon',\n    async ({signal}) => {\n        const res = await fetch(`${BASE_URL}/coupon?_sort=id&_order=desc`, {signal})\n        const data = await res.json()\n        return data\n    }\n)\n\nexport const addCoupon = createAsyncThunk(\n    'coupon/addCoupon',\n    async ({postData}) => {\n        const res = await fetch(`${BASE_URL}/coupon`, postConfigure(postData))\n        const data = await res.json()\n        return data\n    }\n)\n\nexport const updateCouponStatus = createAsyncThunk(\n    'coupon/updateCouponStatus',\n    async ({id, updateData}) => {\n        const res = await fetch(`${BASE_URL}/coupon/${id}`, patchConfigure(updateData))\n        const data = await res.json()\n        return { id, data }\n    }\n)\n\nexport const updateCoupon = createAsyncThunk(\n    'coupon/updatecoupon',\n    async ({id, updateData}) => {\n        const res = await fetch(`${BASE_URL}/coupon/${id}`, patchConfigure(updateData))\n        const data = await res.json()\n        const status = res.ok;\n        return { id, data, status }\n    }\n)\n\n\nconst couponSlice = createSlice({\n    name: 'coupon',\n    initialState:{\n        coupon: [],\n        error: false\n    },\n    extraReducers: builder => {\n\n        // fetch coupon\n        builder.addCase(fetchCoupon.fulfilled, (state, action) => {\n            state.error = false;\n            state.coupon = action.payload\n        });\n        builder.addCase(fetchCoupon.rejected, (state, action) => {\n            const error = action.error;\n\n            if (error.name !== \"AbortError\") {\n                state.error = error.message;\n                state.coupon = []\n            }\n        });\n        \n        // Adding Coupon\n        builder.addCase(addCoupon.pending, () => {\n            toast.dismiss()\n            toast.info('Ading Coupon')\n        });\n        builder.addCase(addCoupon.fulfilled, (state, action) => {\n            toast.dismiss()\n            toast.success('Coupon Added')\n\n            state.coupon.unshift(action.payload)\n        });\n        builder.addCase(addCoupon.rejected, (state, action) => {\n            const error = action.error.message;\n\n            toast.dismiss()\n            toast.error(error)\n        });\n        \n        // Updating Coupon Status\n        builder.addCase(updateCouponStatus.pending, () => {\n            toast.dismiss()\n            toast.info('updating')\n        });\n        builder.addCase(updateCouponStatus.fulfilled, (state, action) => {\n            toast.dismiss()\n            toast.success('updated')\n\n            const { id, data } = action.payload;\n            const targetIndex = state.coupon.findIndex(coupon=> coupon.id === id);\n            state.coupon[targetIndex] = { ...state.coupon[targetIndex], ...data}\n        });\n        builder.addCase(updateCouponStatus.rejected, (state, action) => {\n            const error = action.error.message;\n\n            toast.dismiss()\n            toast.error(error)\n        });\n\n        // Updating Coupon\n        builder.addCase(updateCoupon.pending, () => {\n            toast.dismiss()\n            toast.info('updating')\n        });\n        builder.addCase(updateCoupon.fulfilled, (state, action) => {\n            toast.dismiss()\n            toast.success('updated')\n\n            const { id, data } = action.payload;\n            const targetIndex = state.coupon.findIndex(coupon=> coupon.id === id);\n            state.coupon[targetIndex] = { ...state.coupon[targetIndex], ...data}\n        });\n        builder.addCase(updateCoupon.rejected, (state, action) => {\n            const error = action.error.message;\n            toast.dismiss()\n            toast.error(error)\n        });\n    }\n})\n\nexport default couponSlice.reducer"],"mappings":"AAAA,SAASA,KAAT,QAAsB,gBAAtB;AACA,SAASC,gBAAT,EAA2BC,WAA3B,QAA8C,kBAA9C;AACA,SAASC,QAAT,EAAmBC,cAAnB,EAAmCC,aAAnC,QAAwD,eAAxD;AAEA,OAAO,MAAMC,WAAW,GAAGL,gBAAgB,CACvC,oBADuC,EAEvC,cAAoB;EAAA,IAAb;IAACM;EAAD,CAAa;EAChB,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAEN,QAAS,8BAAb,EAA4C;IAACI;EAAD,CAA5C,CAAvB;EACA,MAAMG,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;EACA,OAAOD,IAAP;AACH,CANsC,CAApC;AASP,OAAO,MAAME,SAAS,GAAGX,gBAAgB,CACrC,kBADqC,EAErC,eAAsB;EAAA,IAAf;IAACY;EAAD,CAAe;EAClB,MAAML,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAEN,QAAS,SAAb,EAAuBE,aAAa,CAACQ,QAAD,CAApC,CAAvB;EACA,MAAMH,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;EACA,OAAOD,IAAP;AACH,CANoC,CAAlC;AASP,OAAO,MAAMI,kBAAkB,GAAGb,gBAAgB,CAC9C,2BAD8C,EAE9C,eAA4B;EAAA,IAArB;IAACc,EAAD;IAAKC;EAAL,CAAqB;EACxB,MAAMR,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAEN,QAAS,WAAUY,EAAG,EAA1B,EAA6BX,cAAc,CAACY,UAAD,CAA3C,CAAvB;EACA,MAAMN,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;EACA,OAAO;IAAEI,EAAF;IAAML;EAAN,CAAP;AACH,CAN6C,CAA3C;AASP,OAAO,MAAMO,YAAY,GAAGhB,gBAAgB,CACxC,qBADwC,EAExC,eAA4B;EAAA,IAArB;IAACc,EAAD;IAAKC;EAAL,CAAqB;EACxB,MAAMR,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAEN,QAAS,WAAUY,EAAG,EAA1B,EAA6BX,cAAc,CAACY,UAAD,CAA3C,CAAvB;EACA,MAAMN,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;EACA,MAAMO,MAAM,GAAGV,GAAG,CAACW,EAAnB;EACA,OAAO;IAAEJ,EAAF;IAAML,IAAN;IAAYQ;EAAZ,CAAP;AACH,CAPuC,CAArC;AAWP,MAAME,WAAW,GAAGlB,WAAW,CAAC;EAC5BmB,IAAI,EAAE,QADsB;EAE5BC,YAAY,EAAC;IACTC,MAAM,EAAE,EADC;IAETC,KAAK,EAAE;EAFE,CAFe;EAM5BC,aAAa,EAAEC,OAAO,IAAI;IAEtB;IACAA,OAAO,CAACC,OAAR,CAAgBrB,WAAW,CAACsB,SAA5B,EAAuC,CAACC,KAAD,EAAQC,MAAR,KAAmB;MACtDD,KAAK,CAACL,KAAN,GAAc,KAAd;MACAK,KAAK,CAACN,MAAN,GAAeO,MAAM,CAACC,OAAtB;IACH,CAHD;IAIAL,OAAO,CAACC,OAAR,CAAgBrB,WAAW,CAAC0B,QAA5B,EAAsC,CAACH,KAAD,EAAQC,MAAR,KAAmB;MACrD,MAAMN,KAAK,GAAGM,MAAM,CAACN,KAArB;;MAEA,IAAIA,KAAK,CAACH,IAAN,KAAe,YAAnB,EAAiC;QAC7BQ,KAAK,CAACL,KAAN,GAAcA,KAAK,CAACS,OAApB;QACAJ,KAAK,CAACN,MAAN,GAAe,EAAf;MACH;IACJ,CAPD,EAPsB,CAgBtB;;IACAG,OAAO,CAACC,OAAR,CAAgBf,SAAS,CAACsB,OAA1B,EAAmC,MAAM;MACrClC,KAAK,CAACmC,OAAN;MACAnC,KAAK,CAACoC,IAAN,CAAW,cAAX;IACH,CAHD;IAIAV,OAAO,CAACC,OAAR,CAAgBf,SAAS,CAACgB,SAA1B,EAAqC,CAACC,KAAD,EAAQC,MAAR,KAAmB;MACpD9B,KAAK,CAACmC,OAAN;MACAnC,KAAK,CAACqC,OAAN,CAAc,cAAd;MAEAR,KAAK,CAACN,MAAN,CAAae,OAAb,CAAqBR,MAAM,CAACC,OAA5B;IACH,CALD;IAMAL,OAAO,CAACC,OAAR,CAAgBf,SAAS,CAACoB,QAA1B,EAAoC,CAACH,KAAD,EAAQC,MAAR,KAAmB;MACnD,MAAMN,KAAK,GAAGM,MAAM,CAACN,KAAP,CAAaS,OAA3B;MAEAjC,KAAK,CAACmC,OAAN;MACAnC,KAAK,CAACwB,KAAN,CAAYA,KAAZ;IACH,CALD,EA3BsB,CAkCtB;;IACAE,OAAO,CAACC,OAAR,CAAgBb,kBAAkB,CAACoB,OAAnC,EAA4C,MAAM;MAC9ClC,KAAK,CAACmC,OAAN;MACAnC,KAAK,CAACoC,IAAN,CAAW,UAAX;IACH,CAHD;IAIAV,OAAO,CAACC,OAAR,CAAgBb,kBAAkB,CAACc,SAAnC,EAA8C,CAACC,KAAD,EAAQC,MAAR,KAAmB;MAC7D9B,KAAK,CAACmC,OAAN;MACAnC,KAAK,CAACqC,OAAN,CAAc,SAAd;MAEA,MAAM;QAAEtB,EAAF;QAAML;MAAN,IAAeoB,MAAM,CAACC,OAA5B;MACA,MAAMQ,WAAW,GAAGV,KAAK,CAACN,MAAN,CAAaiB,SAAb,CAAuBjB,MAAM,IAAGA,MAAM,CAACR,EAAP,KAAcA,EAA9C,CAApB;MACAc,KAAK,CAACN,MAAN,CAAagB,WAAb,IAA4B,EAAE,GAAGV,KAAK,CAACN,MAAN,CAAagB,WAAb,CAAL;QAAgC,GAAG7B;MAAnC,CAA5B;IACH,CAPD;IAQAgB,OAAO,CAACC,OAAR,CAAgBb,kBAAkB,CAACkB,QAAnC,EAA6C,CAACH,KAAD,EAAQC,MAAR,KAAmB;MAC5D,MAAMN,KAAK,GAAGM,MAAM,CAACN,KAAP,CAAaS,OAA3B;MAEAjC,KAAK,CAACmC,OAAN;MACAnC,KAAK,CAACwB,KAAN,CAAYA,KAAZ;IACH,CALD,EA/CsB,CAsDtB;;IACAE,OAAO,CAACC,OAAR,CAAgBV,YAAY,CAACiB,OAA7B,EAAsC,MAAM;MACxClC,KAAK,CAACmC,OAAN;MACAnC,KAAK,CAACoC,IAAN,CAAW,UAAX;IACH,CAHD;IAIAV,OAAO,CAACC,OAAR,CAAgBV,YAAY,CAACW,SAA7B,EAAwC,CAACC,KAAD,EAAQC,MAAR,KAAmB;MACvD9B,KAAK,CAACmC,OAAN;MACAnC,KAAK,CAACqC,OAAN,CAAc,SAAd;MAEA,MAAM;QAAEtB,EAAF;QAAML;MAAN,IAAeoB,MAAM,CAACC,OAA5B;MACA,MAAMQ,WAAW,GAAGV,KAAK,CAACN,MAAN,CAAaiB,SAAb,CAAuBjB,MAAM,IAAGA,MAAM,CAACR,EAAP,KAAcA,EAA9C,CAApB;MACAc,KAAK,CAACN,MAAN,CAAagB,WAAb,IAA4B,EAAE,GAAGV,KAAK,CAACN,MAAN,CAAagB,WAAb,CAAL;QAAgC,GAAG7B;MAAnC,CAA5B;IACH,CAPD;IAQAgB,OAAO,CAACC,OAAR,CAAgBV,YAAY,CAACe,QAA7B,EAAuC,CAACH,KAAD,EAAQC,MAAR,KAAmB;MACtD,MAAMN,KAAK,GAAGM,MAAM,CAACN,KAAP,CAAaS,OAA3B;MACAjC,KAAK,CAACmC,OAAN;MACAnC,KAAK,CAACwB,KAAN,CAAYA,KAAZ;IACH,CAJD;EAKH;AA9E2B,CAAD,CAA/B;AAiFA,eAAeJ,WAAW,CAACqB,OAA3B"},"metadata":{},"sourceType":"module"}