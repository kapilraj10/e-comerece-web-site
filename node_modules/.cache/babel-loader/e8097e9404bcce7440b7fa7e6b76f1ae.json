{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { BASE_URL, deleteConfig, patchConfigure, postConfigure } from \"../../Api/api\";\nimport { toast } from \"react-toastify\";\nexport const fetchProducts = createAsyncThunk('products/fetchProducts', async _ref => {\n  let {\n    signal\n  } = _ref;\n  const res = await fetch(`${BASE_URL}/products?_sort=id&_order=desc`, {\n    signal\n  });\n  const data = await res.json();\n\n  if (!res.ok) {\n    throw new Error(res.statusText);\n  }\n\n  return data;\n});\nexport const updateProduct = createAsyncThunk('products/updateProduct', async _ref2 => {\n  let {\n    id,\n    updateData\n  } = _ref2;\n  const res = await fetch(`${BASE_URL}/products/${id}`, patchConfigure(updateData));\n  const data = await res.json();\n\n  if (!res.ok) {\n    throw new Error(res.statusText);\n  }\n\n  const status = res.ok;\n  return {\n    data,\n    id,\n    status\n  };\n});\nexport const addProduct = createAsyncThunk('products/addProduct', async _ref3 => {\n  let {\n    productDetails\n  } = _ref3;\n  const res = await fetch(`${BASE_URL}/products`, postConfigure(productDetails));\n  const data = await res.json();\n\n  if (!res.ok) {\n    throw new Error(res.statusText);\n  }\n\n  const status = res.ok;\n  return {\n    data,\n    status\n  };\n});\nexport const deleteProduct = createAsyncThunk('products/deleteProduct', async _ref4 => {\n  let {\n    id\n  } = _ref4;\n  const res = await fetch(`${BASE_URL}/products/${id}`, deleteConfig());\n\n  if (!res.ok) {\n    throw new Error(res.statusText);\n  }\n\n  return id;\n});\nconst productsSlice = createSlice({\n  name: 'products',\n  initialState: {\n    error: false,\n    products: []\n  },\n  extraReducers: builder => {\n    // fetching all product\n    builder.addCase(fetchProducts.fulfilled, (state, action) => {\n      state.error = false;\n      state.products = action.payload;\n    });\n    builder.addCase(fetchProducts.rejected, (state, action) => {\n      const error = action.error;\n\n      if (error.name !== 'AbortError') {\n        state.error = error.message;\n      }\n    }); // updating product\n\n    builder.addCase(updateProduct.pending, () => {\n      toast.dismiss();\n      toast.info('Updating...');\n    });\n    builder.addCase(updateProduct.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success('Update Complete');\n      const {\n        data,\n        id\n      } = action.payload;\n      const targetIndex = state.products.findIndex(product => product.id === Number(id));\n      state.products[targetIndex] = { ...state.products[targetIndex],\n        ...data\n      };\n    });\n    builder.addCase(updateProduct.rejected, (state, action) => {\n      const error = action.error;\n      toast.dismiss();\n      toast.error(error.message);\n    }); // delete product\n\n    builder.addCase(deleteProduct.pending, () => {\n      toast.dismiss();\n      toast.info('Deleting...');\n    });\n    builder.addCase(deleteProduct.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success('Deleted');\n      const id = action.payload;\n      state.products = state.products.filter(product => product.id !== id);\n    });\n    builder.addCase(deleteProduct.rejected, (state, action) => {\n      const error = action.error;\n      toast.dismiss();\n      toast.error(error.message);\n    }); // adding new product\n\n    builder.addCase(addProduct.pending, () => {\n      toast.dismiss();\n      toast.info('uploading product...');\n    });\n    builder.addCase(addProduct.fulfilled, (state, action) => {\n      toast.dismiss();\n      toast.success('Product Uploaded');\n      const product = action.payload.data;\n      state.products.unshift(product);\n    });\n    builder.addCase(addProduct.rejected, (state, action) => {\n      const error = action.error;\n      toast.dismiss();\n      toast.error(error.message);\n    });\n  }\n});\nexport default productsSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","BASE_URL","deleteConfig","patchConfigure","postConfigure","toast","fetchProducts","signal","res","fetch","data","json","ok","Error","statusText","updateProduct","id","updateData","status","addProduct","productDetails","deleteProduct","productsSlice","name","initialState","error","products","extraReducers","builder","addCase","fulfilled","state","action","payload","rejected","message","pending","dismiss","info","success","targetIndex","findIndex","product","Number","filter","unshift","reducer"],"sources":["C:/Users/DELL/OneDrive/Desktop/New folder/New folder/src/App/features/productsSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport { BASE_URL, deleteConfig, patchConfigure, postConfigure } from \"../../Api/api\";\nimport { toast } from \"react-toastify\";\n\nexport const fetchProducts = createAsyncThunk(\n    'products/fetchProducts',\n    async ({ signal }) => {\n        const res = await fetch(`${BASE_URL}/products?_sort=id&_order=desc`, { signal })\n        const data = await res.json()\n        if (!res.ok) {\n            throw new Error(res.statusText)\n        }\n        return data\n    }\n)\n\nexport const updateProduct = createAsyncThunk(\n    'products/updateProduct',\n    async ({ id, updateData }) => {\n        const res = await fetch(`${BASE_URL}/products/${id}`, patchConfigure(updateData))\n        const data = await res.json()\n        if (!res.ok) {\n            throw new Error(res.statusText)\n        }\n        const status = res.ok;\n        return {data, id, status}\n    }\n)\n\nexport const addProduct = createAsyncThunk(\n    'products/addProduct',\n    async ({ productDetails }) => {\n        const res = await fetch(`${BASE_URL}/products`, postConfigure(productDetails))\n        const data = await res.json()\n        if (!res.ok) {\n            throw new Error(res.statusText)\n        }\n        const status = res.ok;\n        return { data, status }\n    }\n)\n\nexport const deleteProduct = createAsyncThunk(\n    'products/deleteProduct',\n    async ({id}) => {\n        const res = await fetch(`${BASE_URL}/products/${id}`, deleteConfig())\n        if (!res.ok) {\n            throw new Error(res.statusText)\n        }\n        return  id\n    }\n)\n\nconst productsSlice = createSlice({\n    name: 'products',\n    initialState: {\n        error: false,\n        products: []\n    },\n    extraReducers: (builder) => {\n\n        // fetching all product\n        builder.addCase(fetchProducts.fulfilled, (state, action) => {\n            state.error = false;\n            state.products = action.payload;\n        });\n        builder.addCase(fetchProducts.rejected, (state, action) => {\n            const error = action.error;\n            if ( error.name !== 'AbortError') {\n                state.error = error.message;\n            }\n        });\n\n        // updating product\n        builder.addCase(updateProduct.pending, () => {\n            toast.dismiss();\n            toast.info('Updating...')\n        });\n        builder.addCase(updateProduct.fulfilled, (state, action) => {\n            toast.dismiss();\n            toast.success('Update Complete')\n            const {data, id} = action.payload;\n            const targetIndex = state.products.findIndex(product => product.id === Number(id));\n\n            state.products[targetIndex] = { ...state.products[targetIndex], ...data}\n        });\n        builder.addCase(updateProduct.rejected, (state, action) => {\n            const error = action.error;\n            toast.dismiss();\n            toast.error(error.message)\n        });\n\n        // delete product\n        builder.addCase(deleteProduct.pending, () => {\n            toast.dismiss();\n            toast.info('Deleting...')\n        });\n        builder.addCase(deleteProduct.fulfilled, (state, action) => {\n            toast.dismiss();\n            toast.success('Deleted')\n            const id = action.payload;\n            state.products = state.products.filter(product => product.id !== id)\n        });\n        builder.addCase(deleteProduct.rejected, (state, action) => {\n            const error = action.error;\n            toast.dismiss();\n            toast.error(error.message)\n        });\n\n        // adding new product\n        builder.addCase(addProduct.pending, () => {\n            toast.dismiss();\n            toast.info('uploading product...')\n        });\n        builder.addCase(addProduct.fulfilled, (state, action) => {\n            toast.dismiss();\n            toast.success('Product Uploaded')\n            const product = action.payload.data;\n            state.products.unshift(product);\n        });\n        builder.addCase(addProduct.rejected, (state, action) => {\n            const error = action.error;\n            toast.dismiss();\n            toast.error(error.message)\n        });\n    }\n})\n\nexport default productsSlice.reducer;"],"mappings":"AAAA,SAASA,gBAAT,EAA2BC,WAA3B,QAA8C,kBAA9C;AACA,SAASC,QAAT,EAAmBC,YAAnB,EAAiCC,cAAjC,EAAiDC,aAAjD,QAAsE,eAAtE;AACA,SAASC,KAAT,QAAsB,gBAAtB;AAEA,OAAO,MAAMC,aAAa,GAAGP,gBAAgB,CACzC,wBADyC,EAEzC,cAAsB;EAAA,IAAf;IAAEQ;EAAF,CAAe;EAClB,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAER,QAAS,gCAAb,EAA8C;IAAEM;EAAF,CAA9C,CAAvB;EACA,MAAMG,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;;EACA,IAAI,CAACH,GAAG,CAACI,EAAT,EAAa;IACT,MAAM,IAAIC,KAAJ,CAAUL,GAAG,CAACM,UAAd,CAAN;EACH;;EACD,OAAOJ,IAAP;AACH,CATwC,CAAtC;AAYP,OAAO,MAAMK,aAAa,GAAGhB,gBAAgB,CACzC,wBADyC,EAEzC,eAA8B;EAAA,IAAvB;IAAEiB,EAAF;IAAMC;EAAN,CAAuB;EAC1B,MAAMT,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAER,QAAS,aAAYe,EAAG,EAA5B,EAA+Bb,cAAc,CAACc,UAAD,CAA7C,CAAvB;EACA,MAAMP,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;;EACA,IAAI,CAACH,GAAG,CAACI,EAAT,EAAa;IACT,MAAM,IAAIC,KAAJ,CAAUL,GAAG,CAACM,UAAd,CAAN;EACH;;EACD,MAAMI,MAAM,GAAGV,GAAG,CAACI,EAAnB;EACA,OAAO;IAACF,IAAD;IAAOM,EAAP;IAAWE;EAAX,CAAP;AACH,CAVwC,CAAtC;AAaP,OAAO,MAAMC,UAAU,GAAGpB,gBAAgB,CACtC,qBADsC,EAEtC,eAA8B;EAAA,IAAvB;IAAEqB;EAAF,CAAuB;EAC1B,MAAMZ,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAER,QAAS,WAAb,EAAyBG,aAAa,CAACgB,cAAD,CAAtC,CAAvB;EACA,MAAMV,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;;EACA,IAAI,CAACH,GAAG,CAACI,EAAT,EAAa;IACT,MAAM,IAAIC,KAAJ,CAAUL,GAAG,CAACM,UAAd,CAAN;EACH;;EACD,MAAMI,MAAM,GAAGV,GAAG,CAACI,EAAnB;EACA,OAAO;IAAEF,IAAF;IAAQQ;EAAR,CAAP;AACH,CAVqC,CAAnC;AAaP,OAAO,MAAMG,aAAa,GAAGtB,gBAAgB,CACzC,wBADyC,EAEzC,eAAgB;EAAA,IAAT;IAACiB;EAAD,CAAS;EACZ,MAAMR,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAER,QAAS,aAAYe,EAAG,EAA5B,EAA+Bd,YAAY,EAA3C,CAAvB;;EACA,IAAI,CAACM,GAAG,CAACI,EAAT,EAAa;IACT,MAAM,IAAIC,KAAJ,CAAUL,GAAG,CAACM,UAAd,CAAN;EACH;;EACD,OAAQE,EAAR;AACH,CARwC,CAAtC;AAWP,MAAMM,aAAa,GAAGtB,WAAW,CAAC;EAC9BuB,IAAI,EAAE,UADwB;EAE9BC,YAAY,EAAE;IACVC,KAAK,EAAE,KADG;IAEVC,QAAQ,EAAE;EAFA,CAFgB;EAM9BC,aAAa,EAAGC,OAAD,IAAa;IAExB;IACAA,OAAO,CAACC,OAAR,CAAgBvB,aAAa,CAACwB,SAA9B,EAAyC,CAACC,KAAD,EAAQC,MAAR,KAAmB;MACxDD,KAAK,CAACN,KAAN,GAAc,KAAd;MACAM,KAAK,CAACL,QAAN,GAAiBM,MAAM,CAACC,OAAxB;IACH,CAHD;IAIAL,OAAO,CAACC,OAAR,CAAgBvB,aAAa,CAAC4B,QAA9B,EAAwC,CAACH,KAAD,EAAQC,MAAR,KAAmB;MACvD,MAAMP,KAAK,GAAGO,MAAM,CAACP,KAArB;;MACA,IAAKA,KAAK,CAACF,IAAN,KAAe,YAApB,EAAkC;QAC9BQ,KAAK,CAACN,KAAN,GAAcA,KAAK,CAACU,OAApB;MACH;IACJ,CALD,EAPwB,CAcxB;;IACAP,OAAO,CAACC,OAAR,CAAgBd,aAAa,CAACqB,OAA9B,EAAuC,MAAM;MACzC/B,KAAK,CAACgC,OAAN;MACAhC,KAAK,CAACiC,IAAN,CAAW,aAAX;IACH,CAHD;IAIAV,OAAO,CAACC,OAAR,CAAgBd,aAAa,CAACe,SAA9B,EAAyC,CAACC,KAAD,EAAQC,MAAR,KAAmB;MACxD3B,KAAK,CAACgC,OAAN;MACAhC,KAAK,CAACkC,OAAN,CAAc,iBAAd;MACA,MAAM;QAAC7B,IAAD;QAAOM;MAAP,IAAagB,MAAM,CAACC,OAA1B;MACA,MAAMO,WAAW,GAAGT,KAAK,CAACL,QAAN,CAAee,SAAf,CAAyBC,OAAO,IAAIA,OAAO,CAAC1B,EAAR,KAAe2B,MAAM,CAAC3B,EAAD,CAAzD,CAApB;MAEAe,KAAK,CAACL,QAAN,CAAec,WAAf,IAA8B,EAAE,GAAGT,KAAK,CAACL,QAAN,CAAec,WAAf,CAAL;QAAkC,GAAG9B;MAArC,CAA9B;IACH,CAPD;IAQAkB,OAAO,CAACC,OAAR,CAAgBd,aAAa,CAACmB,QAA9B,EAAwC,CAACH,KAAD,EAAQC,MAAR,KAAmB;MACvD,MAAMP,KAAK,GAAGO,MAAM,CAACP,KAArB;MACApB,KAAK,CAACgC,OAAN;MACAhC,KAAK,CAACoB,KAAN,CAAYA,KAAK,CAACU,OAAlB;IACH,CAJD,EA3BwB,CAiCxB;;IACAP,OAAO,CAACC,OAAR,CAAgBR,aAAa,CAACe,OAA9B,EAAuC,MAAM;MACzC/B,KAAK,CAACgC,OAAN;MACAhC,KAAK,CAACiC,IAAN,CAAW,aAAX;IACH,CAHD;IAIAV,OAAO,CAACC,OAAR,CAAgBR,aAAa,CAACS,SAA9B,EAAyC,CAACC,KAAD,EAAQC,MAAR,KAAmB;MACxD3B,KAAK,CAACgC,OAAN;MACAhC,KAAK,CAACkC,OAAN,CAAc,SAAd;MACA,MAAMvB,EAAE,GAAGgB,MAAM,CAACC,OAAlB;MACAF,KAAK,CAACL,QAAN,GAAiBK,KAAK,CAACL,QAAN,CAAekB,MAAf,CAAsBF,OAAO,IAAIA,OAAO,CAAC1B,EAAR,KAAeA,EAAhD,CAAjB;IACH,CALD;IAMAY,OAAO,CAACC,OAAR,CAAgBR,aAAa,CAACa,QAA9B,EAAwC,CAACH,KAAD,EAAQC,MAAR,KAAmB;MACvD,MAAMP,KAAK,GAAGO,MAAM,CAACP,KAArB;MACApB,KAAK,CAACgC,OAAN;MACAhC,KAAK,CAACoB,KAAN,CAAYA,KAAK,CAACU,OAAlB;IACH,CAJD,EA5CwB,CAkDxB;;IACAP,OAAO,CAACC,OAAR,CAAgBV,UAAU,CAACiB,OAA3B,EAAoC,MAAM;MACtC/B,KAAK,CAACgC,OAAN;MACAhC,KAAK,CAACiC,IAAN,CAAW,sBAAX;IACH,CAHD;IAIAV,OAAO,CAACC,OAAR,CAAgBV,UAAU,CAACW,SAA3B,EAAsC,CAACC,KAAD,EAAQC,MAAR,KAAmB;MACrD3B,KAAK,CAACgC,OAAN;MACAhC,KAAK,CAACkC,OAAN,CAAc,kBAAd;MACA,MAAMG,OAAO,GAAGV,MAAM,CAACC,OAAP,CAAevB,IAA/B;MACAqB,KAAK,CAACL,QAAN,CAAemB,OAAf,CAAuBH,OAAvB;IACH,CALD;IAMAd,OAAO,CAACC,OAAR,CAAgBV,UAAU,CAACe,QAA3B,EAAqC,CAACH,KAAD,EAAQC,MAAR,KAAmB;MACpD,MAAMP,KAAK,GAAGO,MAAM,CAACP,KAArB;MACApB,KAAK,CAACgC,OAAN;MACAhC,KAAK,CAACoB,KAAN,CAAYA,KAAK,CAACU,OAAlB;IACH,CAJD;EAKH;AAxE6B,CAAD,CAAjC;AA2EA,eAAeb,aAAa,CAACwB,OAA7B"},"metadata":{},"sourceType":"module"}